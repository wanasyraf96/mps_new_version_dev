{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\ANSI - LI\\\\MyMPS\\\\v2\\\\mps_new_version_dev\\\\src\\\\Login.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport react, { useState } from \"react\";\nimport { setUserSession } from './Utils/Common';\nimport { TextInputField, Heading, Button, BuildIcon } from \"evergreen-ui\";\nimport logo1 from \"./assets/img/logo1.png\";\nimport IndexNavbar from \"./components/Navbars/IndexNavbar2.js\";\nimport Footer from \"./components/Footers/Footer\";\nimport swal from \"sweetalert\";\n\nfunction Login(props) {\n  _s();\n\n  const username = useFormInput(\"\");\n  const password = useFormInput(\"\");\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  const handleLogin = () => {\n    setError(null);\n    setLoading(true); // var formData = new FormData();\n    // formData.append(\"username\", username.value)\n    // formData.append(\"password\", password.value)\n    // axios('https://api.corrad.my/api/API-login', {\n    //     method: 'POST',\n    //     mode: 'no-cors', \n    //     headers: {\n    //         'Access-Control-Allow-Origin': '*',\n    //         'Content-Type': 'application/json',\n    //     },\n    //     data : formData\n    // })\n    // .then(response => {\n    //     setLoading(false);\n    //     setUserSession(response.data[0].NOAKAUN, response.data[0].NAMA_PEMILIK);\n    //     console.log(response.data);\n    //     props.history.push('/dashboard');\n    // })\n    // .catch(error => {\n    //     setLoading(false);\n    //     console.log(\"Something went wrong. Plese try again!\");\n    //     console.log(error.data)\n    //     setError(error.data);\n    // });\n\n    if (username.value == \"\" || password.value == \"\") {\n      swal(\"Opss!\", \"Sila pastikan kata nama dan kata laluan anda sah\", \"error\");\n      setLoading(false);\n    } else {\n      var myHeaders = new Headers();\n      myHeaders.append(\"Cookie\", \"__cfduid=db6f29fff3ce79e0a3fe70a3990b3baeb1603864221; CORRAD_LANGUAGE=1; CORRAD_THEME=lavender; CORRAD_API_MYMPS=6nghhhcstuc4aad81r3m9qqp4b; MYMPS_API=jstp68stuf7siabrp233iff4pt\");\n      var formdata = new FormData();\n      formdata.append(\"username\", username.value);\n      formdata.append(\"password\", password.value);\n      var requestOptions = {\n        method: 'POST',\n        body: formdata,\n        redirect: 'follow'\n      };\n      var urlAPI1 = 'https://mymps.corrad.my/int/api_generator.php?api_name=api_login';\n      var urlAPI2 = 'https://api.corrad.my/api/API-login';\n      var urlAPI3 = 'https://apisim.mps.gov.my/api/mymps/akaunbyic?nokp=' + username.value;\n      fetch(urlAPI3).then(response => response.json()).then(result => {\n        for (var i = 0; i < result.length; i++) {\n          console.log(result[i].NOAKAUN);\n        }\n\n        setLoading(false); // if(result.status == \"unsuccess\")\n        // {\n        //     console.log(\"Wrong credentials. Please try again!\");\n        //     swal(\"Opss!\", \"Sila pastikan kata nama dan kata laluan anda sah\", \"error\");\n        // }\n        // else if(result.status == \"success\")\n        // {\n        //     setUserSession(result.data[0].TOKEN, result.data[0].USERNAME);\n        //     //swal(\"Bejaya!\", \"Login Berjaya!\", \"success\");\n        //     props.history.push('/dashboard');\n        // }\n\n        if (!result) {\n          console.log(\"Wrong credentials. Please try again!\");\n          swal(\"Opss!\", \"Sila pastikan kata nama dan kata laluan anda sah\", \"error\");\n        } else if (result) {\n          setUserSession(btoa(result), result[0].NAMA_PEMILIK, username.value); //swal(\"Bejaya!\", \"Login Berjaya!\", \"success\");\n\n          props.history.push('/dashboard');\n        }\n      }).catch(error => {\n        console.log(error);\n        swal(\"Opss!\", \"Something went wrong. Please contact your administrator!\", \"error\").then(value => {//props.history.push('/');\n        });\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-gray\",\n    children: [/*#__PURE__*/_jsxDEV(IndexNavbar, {\n      fixed: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"py-20 px-5 relative\",\n      style: {\n        background: \"rgb(34,81,122)\",\n        background: \"linear-gradient(90deg, rgba(34,81,122,1) 0%, rgba(27,147,171,1) 100%)\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"min-h-screen flex items-center justify-center  px-4 sm:px-6\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"max-w-md w-full\",\n          style: {\n            marginTop: \"-100px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              class: \"mx-auto w-auto\",\n              src: logo1,\n              alt: \"mymps\",\n              style: {\n                height: \"120px\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n              class: \"mt-6 text-center text-xl leading-9 font-extrabold text-white\",\n              children: \"Login Akaun\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            class: \"mt-8\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"hidden\",\n              name: \"remember\",\n              value: \"true\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"rounded-md shadow-sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  \"aria-label\": \"Email\",\n                  ...username,\n                  name: \"email\",\n                  type: \"email\",\n                  required: true,\n                  class: \"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-sm sm:leading-5\",\n                  placeholder: \"Kad Pengenalan\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 142,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"-mt-px\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  \"aria-label\": \"Password\",\n                  ...password,\n                  name: \"password\",\n                  type: \"password\",\n                  required: true,\n                  class: \"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-sm sm:leading-5\",\n                  placeholder: \"Kata Laluan\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 146,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"mt-6 flex items-center justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"flex items-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  id: \"remember_me\",\n                  type: \"checkbox\",\n                  class: \"form-checkbox h-4 w-4 text-indigo-600 transition duration-150 ease-in-out\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 152,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                  for: \"remember_me\",\n                  class: \"ml-2 block text-sm leading-5 text-gray-300\",\n                  children: \"Ingat saya\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 153,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"text-sm leading-5\",\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: \"#\",\n                  class: \"font-medium text-gray-100 hover:text-gray-200 focus:outline-none focus:underline transition ease-in-out duration-150\",\n                  children: \"Terlupa kata laluan?\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 159,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"mt-6\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: handleLogin,\n                class: \"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-green-600 hover:bg-green-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out\",\n                children: loading ? 'Loading...' : 'Login'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 127,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Login, \"tPQPH8iN8j04Dai1L3YP0F6HH9A=\", false, function () {\n  return [useFormInput, useFormInput];\n});\n\n_c = Login;\n\nconst useFormInput = initialValue => {\n  _s2();\n\n  const [value, setValue] = useState(initialValue);\n\n  const handleChange = e => {\n    setValue(e.target.value);\n  };\n\n  return {\n    value,\n    onChange: handleChange\n  };\n};\n\n_s2(useFormInput, \"L08zUdRTae9t+nWvf9xbU6NcRrM=\");\n\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["D:/ANSI - LI/MyMPS/v2/mps_new_version_dev/src/Login.js"],"names":["react","useState","setUserSession","TextInputField","Heading","Button","BuildIcon","logo1","IndexNavbar","Footer","swal","Login","props","username","useFormInput","password","error","setError","loading","setLoading","handleLogin","value","myHeaders","Headers","append","formdata","FormData","requestOptions","method","body","redirect","urlAPI1","urlAPI2","urlAPI3","fetch","then","response","json","result","i","length","console","log","NOAKAUN","btoa","NAMA_PEMILIK","history","push","catch","background","marginTop","height","initialValue","setValue","handleChange","e","target","onChange"],"mappings":"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","sourcesContent":["import react, {useState} from \"react\";\r\nimport { setUserSession } from './Utils/Common';\r\nimport { TextInputField, Heading, Button, BuildIcon } from \"evergreen-ui\";\r\nimport logo1 from \"./assets/img/logo1.png\";\r\n\r\nimport IndexNavbar from \"./components/Navbars/IndexNavbar2.js\";\r\nimport Footer from \"./components/Footers/Footer\";\r\n\r\nimport swal from \"sweetalert\";\r\n\r\nfunction Login(props){\r\n\r\n    const username = useFormInput(\"\");\r\n    const password = useFormInput(\"\");\r\n    const [error, setError] = useState(null);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const handleLogin = () => {\r\n        setError(null);\r\n        setLoading(true);\r\n\r\n        // var formData = new FormData();\r\n        // formData.append(\"username\", username.value)\r\n        // formData.append(\"password\", password.value)\r\n        \r\n        // axios('https://api.corrad.my/api/API-login', {\r\n        //     method: 'POST',\r\n        //     mode: 'no-cors', \r\n        //     headers: {\r\n        //         'Access-Control-Allow-Origin': '*',\r\n        //         'Content-Type': 'application/json',\r\n        //     },\r\n        //     data : formData\r\n        // })\r\n        // .then(response => {\r\n\r\n        //     setLoading(false);\r\n        //     setUserSession(response.data[0].NOAKAUN, response.data[0].NAMA_PEMILIK);\r\n\r\n        //     console.log(response.data);\r\n        //     props.history.push('/dashboard');\r\n        // })\r\n        // .catch(error => {\r\n\r\n        //     setLoading(false);\r\n\r\n        //     console.log(\"Something went wrong. Plese try again!\");\r\n        //     console.log(error.data)\r\n        //     setError(error.data);\r\n        // });\r\n\r\n        if(username.value == \"\" || password.value == \"\"){\r\n\r\n            swal(\"Opss!\", \"Sila pastikan kata nama dan kata laluan anda sah\", \"error\");\r\n            setLoading(false);\r\n\r\n        }else{\r\n\r\n            var myHeaders = new Headers();\r\n            myHeaders.append(\"Cookie\", \"__cfduid=db6f29fff3ce79e0a3fe70a3990b3baeb1603864221; CORRAD_LANGUAGE=1; CORRAD_THEME=lavender; CORRAD_API_MYMPS=6nghhhcstuc4aad81r3m9qqp4b; MYMPS_API=jstp68stuf7siabrp233iff4pt\");\r\n            \r\n            var formdata = new FormData();\r\n            formdata.append(\"username\", username.value);\r\n            formdata.append(\"password\", password.value);\r\n\r\n            var requestOptions = {\r\n                method: 'POST',\r\n                body: formdata,\r\n                redirect: 'follow'\r\n            };\r\n\r\n            var urlAPI1 = 'https://mymps.corrad.my/int/api_generator.php?api_name=api_login';\r\n            var urlAPI2 = 'https://api.corrad.my/api/API-login';\r\n            var urlAPI3 = 'https://apisim.mps.gov.my/api/mymps/akaunbyic?nokp=' + username.value;\r\n\r\n            fetch(urlAPI3)\r\n            .then(response => response.json())\r\n            .then(result => {\r\n\r\n                for(var i = 0; i < result.length; i++){\r\n                    console.log(result[i].NOAKAUN);\r\n                }\r\n                setLoading(false);\r\n\r\n                // if(result.status == \"unsuccess\")\r\n                // {\r\n                //     console.log(\"Wrong credentials. Please try again!\");\r\n                //     swal(\"Opss!\", \"Sila pastikan kata nama dan kata laluan anda sah\", \"error\");\r\n                // }\r\n                // else if(result.status == \"success\")\r\n                // {\r\n                //     setUserSession(result.data[0].TOKEN, result.data[0].USERNAME);\r\n\r\n                //     //swal(\"Bejaya!\", \"Login Berjaya!\", \"success\");\r\n                //     props.history.push('/dashboard');\r\n                // }\r\n                \r\n                if(!result)\r\n                {\r\n                    console.log(\"Wrong credentials. Please try again!\");\r\n                    swal(\"Opss!\", \"Sila pastikan kata nama dan kata laluan anda sah\", \"error\");\r\n                }\r\n                else if(result)\r\n                {\r\n                    setUserSession(btoa(result), result[0].NAMA_PEMILIK, username.value);\r\n\r\n                    //swal(\"Bejaya!\", \"Login Berjaya!\", \"success\");\r\n                    props.history.push('/dashboard');\r\n                }\r\n\r\n            })\r\n            .catch(error => {\r\n\r\n                console.log(error);\r\n                swal(\"Opss!\", \"Something went wrong. Please contact your administrator!\", \"error\")\r\n                .then((value) => {\r\n                    //props.history.push('/');\r\n                })\r\n\r\n            });\r\n        }\r\n        \r\n\r\n    }\r\n\r\n    return (\r\n        <div className=\"bg-gray\">\r\n            <IndexNavbar fixed />\r\n        <section className=\"py-20 px-5 relative\" style={{background: \"rgb(34,81,122)\", background: \"linear-gradient(90deg, rgba(34,81,122,1) 0%, rgba(27,147,171,1) 100%)\"}}>\r\n        <div class=\"min-h-screen flex items-center justify-center  px-4 sm:px-6\">\r\n            <div class=\"max-w-md w-full\" style={{marginTop: \"-100px\"}}>\r\n                <div>\r\n                <img class=\"mx-auto w-auto\" src={logo1} alt=\"mymps\" style={{height: \"120px\"}}/>\r\n                <h2 class=\"mt-6 text-center text-xl leading-9 font-extrabold text-white\">\r\n                    Login Akaun\r\n                </h2>\r\n                </div>\r\n                <form class=\"mt-8\">\r\n                <input type=\"hidden\" name=\"remember\" value=\"true\" />\r\n                <div class=\"rounded-md shadow-sm\">\r\n                    <div>\r\n                    <input aria-label=\"Email\" {...username} name=\"email\" type=\"email\" required class=\"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-sm sm:leading-5\" placeholder=\"Kad Pengenalan\" />\r\n                    </div>\r\n                    <br />\r\n                    <div class=\"-mt-px\">\r\n                    <input aria-label=\"Password\" {...password} name=\"password\" type=\"password\" required class=\"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-sm sm:leading-5\" placeholder=\"Kata Laluan\" />\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"mt-6 flex items-center justify-between\">\r\n                    <div class=\"flex items-center\">\r\n                    <input id=\"remember_me\" type=\"checkbox\" class=\"form-checkbox h-4 w-4 text-indigo-600 transition duration-150 ease-in-out\" />\r\n                    <label for=\"remember_me\" class=\"ml-2 block text-sm leading-5 text-gray-300\">\r\n                        Ingat saya\r\n                    </label>\r\n                    </div>\r\n\r\n                    <div class=\"text-sm leading-5\">\r\n                    <a href=\"#\" class=\"font-medium text-gray-100 hover:text-gray-200 focus:outline-none focus:underline transition ease-in-out duration-150\">\r\n                        Terlupa kata laluan?\r\n                    </a>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"mt-6\">\r\n                    <button type=\"button\" onClick={handleLogin} class=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-green-600 hover:bg-green-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out\">\r\n                        {loading ? 'Loading...' : 'Login'}\r\n                    </button>\r\n                </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n        </section>\r\n        {/* <section className=\"pb-16 bg-gray-300 relative pt-32\">\r\n            <div className=\"container mx-auto\">\r\n                <div className=\"flex flex-wrap justify-center bg-white shadow-2xl rounded-lg -mt-64 py-16 px-10 relative z-10\">\r\n                    <div className=\"w-full text-center lg:w-8/12\">\r\n                    <p className=\"text-center\">\r\n                        <img className=\"mx-auto\" src={logo1} style={{height:\"150px\", width:\"150px\"}}></img>\r\n                    </p>\r\n                    <Heading size={700} marginTop=\"default\">Login MyMPS</Heading>\r\n                    <p className=\"text-gray-600 text-lg leading-relaxed mt-4 mb-4\">\r\n                        Cause if you do, it can be yours now. Hit the buttons below to\r\n                        navigate to get the Free version for your next project. Build a\r\n                        new web app or give an old project a new look!\r\n                    </p>\r\n                    <div className=\"sm:block flex flex-col mt-10\">\r\n                        <div className=\"text-left p-5\">\r\n                        <TextInputField\r\n                            label=\"KATA NAMA / USERNAME\"\r\n                            //hint=\"This is a hint.\"\r\n                            placeholder=\"cth: 203451057890\"\r\n                            onKeyUp={handleNumber}\r\n                            {...username}\r\n                        />\r\n\r\n                        <TextInputField\r\n                            label=\"KATA LALUAN / PASSWORD\"\r\n                            //hint=\"This is a hint.\"\r\n                            placeholder=\"cth: abcd1234@^\"\r\n                            type=\"password\" \r\n                            {...password}\r\n                        />\r\n                        </div>\r\n                    \r\n                        <div className=\"top-29-px\">\r\n\r\n                            <Button \r\n                                marginRight={16} \r\n                                appearance=\"primary\" \r\n                                intent=\"success\"\r\n                                value={loading ? 'Loading...' : 'Login'} \r\n                                onClick={handleLogin} \r\n                                disabled={loading}\r\n                            >\r\n                                    Login\r\n                            </Button>\r\n\r\n                            <Button \r\n                                marginRight={16} \r\n                                appearance=\"primary\" \r\n                                intent=\"none\"\r\n                                onClick={ () => window.location.href = \"/daftar\"}\r\n                            >\r\n                            Daftar\r\n                            </Button>\r\n\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"text-center mt-16\"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </section> */}\r\n        <Footer />\r\n        </div>\r\n    )\r\n    \r\n}\r\n\r\nconst useFormInput = initialValue => {\r\n    const [value, setValue] = useState(initialValue);\r\n   \r\n    const handleChange = e => {\r\n      setValue(e.target.value);\r\n    }\r\n    return {\r\n      value,\r\n      onChange: handleChange\r\n    }\r\n  }\r\n   \r\nexport default Login;"]},"metadata":{},"sourceType":"module"}